<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>git pull 了其他分支的代码，有很多冲突，又不想处理，该如何撤销这步的操作 | 前端知识荟萃</title>
    <meta name="generator" content="VuePress 1.5.4">
    
    <meta name="description" content="作者：前端小小灶">
    <link rel="preload" href="/blog/assets/css/0.styles.5380bfb8.css" as="style"><link rel="preload" href="/blog/assets/js/app.10236026.js" as="script"><link rel="preload" href="/blog/assets/js/2.d15e92b9.js" as="script"><link rel="preload" href="/blog/assets/js/90.8a4cb432.js" as="script">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.5380bfb8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端知识荟萃</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">概述</a></div><div class="nav-item"><a href="/blog/blog/" class="nav-link router-link-active">内容</a></div> <a href="https://github.com/insistem/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">概述</a></div><div class="nav-item"><a href="/blog/blog/" class="nav-link router-link-active">内容</a></div> <a href="https://github.com/insistem/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0" style="padding-top:10px;"><div class="kitty-main" data-v-2b653b36><span class="stand" data-v-2b653b36></span> <div class="cat" data-v-2b653b36><div class="body" data-v-2b653b36></div> <div class="head" data-v-2b653b36><div class="ear" data-v-2b653b36></div> <div class="ear" data-v-2b653b36></div></div> <div class="face" data-v-2b653b36><div class="nose" data-v-2b653b36></div> <div class="whisker-container" data-v-2b653b36><div class="whisker" data-v-2b653b36></div> <div class="whisker" data-v-2b653b36></div></div> <div class="whisker-container" data-v-2b653b36><div class="whisker" data-v-2b653b36></div> <div class="whisker" data-v-2b653b36></div></div></div> <div class="tail-container" data-v-2b653b36><div class="tail" data-v-2b653b36><div class="tail" data-v-2b653b36><div class="tail" data-v-2b653b36><div class="tail" data-v-2b653b36><div class="tail" data-v-2b653b36><div class="tail" data-v-2b653b36><div class="tail" data-v-2b653b36></div></div></div></div></div></div></div></div></div></div> <p class="sidebar-heading open"><span>前言</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/blog/0.html" class="sidebar-link">介绍</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="git-pull-了其他分支的代码-有很多冲突-又不想处理-该如何撤销这步的操作"><a href="#git-pull-了其他分支的代码-有很多冲突-又不想处理-该如何撤销这步的操作" class="header-anchor">#</a> git pull 了其他分支的代码，有很多冲突，又不想处理，该如何撤销这步的操作</h3> <ul><li><p><code>git reflog</code> : 命令查看你的历史变更记录，如下图所示：</p></li> <li><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">e15c286</span> <span class="token punctuation">(</span><span class="token constant">HEAD</span> <span class="token operator">-</span><span class="token operator">&gt;</span> dev<span class="token operator">-</span>reconsitution<span class="token punctuation">)</span> <span class="token constant">HEAD</span>@<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token operator">:</span> reset<span class="token operator">:</span> moving to e15c286
<span class="token function">e15c286</span> <span class="token punctuation">(</span><span class="token constant">HEAD</span> <span class="token operator">-</span><span class="token operator">&gt;</span> dev<span class="token operator">-</span>reconsitution<span class="token punctuation">)</span> <span class="token constant">HEAD</span>@<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token operator">:</span> checkout<span class="token operator">:</span> moving <span class="token keyword">from</span> dev<span class="token operator">-</span>固定首行<span class="token operator">+</span>增加查询条件 to dev<span class="token operator">-</span>reconsitution
<span class="token number">4</span><span class="token function">add148</span> <span class="token punctuation">(</span>origin<span class="token operator">/</span>dev<span class="token operator">-</span>固定首行<span class="token operator">+</span>增加查询条件<span class="token punctuation">,</span> dev<span class="token operator">-</span>固定首行<span class="token operator">+</span>增加查询条件<span class="token punctuation">)</span> <span class="token constant">HEAD</span>@<span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token operator">:</span> commit<span class="token operator">:</span> task#<span class="token number">47521</span> 收入分类 向上是
绿色 向下是红色
<span class="token number">9</span>c884d1 <span class="token constant">HEAD</span>@<span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token operator">:</span> commit<span class="token operator">:</span> task#<span class="token number">47521</span> 收入分类 上升下降箭头颜色调换
</code></pre></div></li> <li><p><code>git reset --hard HEAD@{n}</code>，（n是你要回退到的引用位置）回退，如上图就是``git reset --hard 40a9a83`</p> <p><code>Git push -u origin master -f</code> 强行push</p> <h3 id="团队多人合作-分支管控-分public跟各个业务线-以oa为例"><a href="#团队多人合作-分支管控-分public跟各个业务线-以oa为例" class="header-anchor">#</a> 团队多人合作，分支管控，分public跟各个业务线，以OA为例</h3> <h3 id="git强制覆盖分支操作"><a href="#git强制覆盖分支操作" class="header-anchor">#</a> Git强制覆盖分支操作</h3> <blockquote><p>前言：使用git进行合作时，有时会建立很多的分支，当分支两两合并完，想将代码移到主分支上时，如果采用merge的方式，往往会有很多冲突。比较推荐的一种方法是将分支内容强制覆盖到主分支（前提是主分支里的东西不再需要），效果类似于清空主分支并将其它分支复制粘贴过去。</p></blockquote> <p>假设有一个分支test，要将这个分支的内容完全覆盖掉主分支master</p> <blockquote><p>git push origin test:master -f      <em>//将test分支强制（-f）推送到主分支master</em></p></blockquote> <blockquote><p>git checkout master             <em>//将当前分支切换到主分支</em></p> <p>git reset --hard test              <em>//将主分支重置为test分支</em></p> <p>git push origin master -f       <em>//将重置后的master分支强制推送到远程仓库</em></p></blockquote></li></ul> <h3 id="将本地的内容-未与远程仓库建立连接-推到远程的建好的仓库"><a href="#将本地的内容-未与远程仓库建立连接-推到远程的建好的仓库" class="header-anchor">#</a> 将本地的内容（未与远程仓库建立连接）推到远程的建好的仓库</h3> <ul><li><code>git init</code></li> <li><code>git add .</code></li> <li><code>git commit -m 'first commit'</code></li> <li><code>git push -u origin master</code> : 增加-u）,第一次提交增加<code>-u（--set-upstream</code>）属性，以后就直接<code>git push</code>就行了，因为已经将本地与远程仓库建立了联系</li></ul> <h3 id="将本地的内容-已经与远程仓库建立连接-推到远程的建好的仓库-推到远程不同分支的仓库上"><a href="#将本地的内容-已经与远程仓库建立连接-推到远程的建好的仓库-推到远程不同分支的仓库上" class="header-anchor">#</a> 将本地的内容（已经与远程仓库建立连接）推到远程的建好的仓库，推到远程不同分支的仓库上</h3> <ul><li><code>git push origin dev-1.0:dev</code>: 将本地的<code>dev-1.0</code>分支的代码，提交到远程的<code>Dev</code>分支</li></ul> <h4 id="更改远程仓库的称呼"><a href="#更改远程仓库的称呼" class="header-anchor">#</a> 更改远程仓库的称呼</h4> <ul><li>一般不设置，origin代表的就是远程的仓库<code>&lt;remote&gt;</code></li> <li>If you run <code>git clone -o booyah</code> instead, then you will have <code>booyah/master</code> as your default remote branch</li></ul> <h4 id="远程仓库新开了一个分支-例如叫-dev-1-1-然后在这个分支上开发"><a href="#远程仓库新开了一个分支-例如叫-dev-1-1-然后在这个分支上开发" class="header-anchor">#</a> 远程仓库新开了一个分支（例如叫：dev-1.1），然后在这个分支上开发</h4> <ul><li>只需要在本地运行<code>git checkout --track origin/dev-1.1</code>，就在本地新建了一个分支，并且与远程仓库的<code>dev-1.1</code>建立联系</li> <li>或者本地不想叫那个名字，可以使用<code>git checkout -b demo origin/dev-1.1</code></li> <li>或者本地新建一个分支，然后与远程分支建立联系
<ul><li><code>git branch dev-1.1</code></li> <li><code>git branch -u origin/serverfix</code></li></ul></li></ul> <h3 id="git-global-setup"><a href="#git-global-setup" class="header-anchor">#</a> Git global setup</h3> <p><code>git config --global user.name &quot;mapengyang&quot;</code></p> <p><code>git config --global user.email &quot;mapengyang@ky-tech.com.cn&quot;</code></p> <h3 id="create-a-new-repository"><a href="#create-a-new-repository" class="header-anchor">#</a> Create a new repository</h3> <p><code>git clone git@gitlab.ky-tech.com.cn:kuasheng-h5/fms-organization-cost.git</code></p> <p><code>cd fms-organization-cost</code></p> <p><code>touch README.md</code></p> <p><code>git add README.md</code></p> <p><code>git commit -m &quot;add README&quot;</code></p> <p><code>git push -u origin master</code></p> <h3 id="existing-folder"><a href="#existing-folder" class="header-anchor">#</a> Existing folder</h3> <p><code>cd existing_folder</code></p> <p><code>git init</code></p> <p><code>git remote add origin git@gitlab.ky-tech.com.cn:kuasheng-h5/fms-organization-cost.git</code></p> <p><code>git add .</code></p> <p><code>git commit -m &quot;Initial commit&quot;</code></p> <p><code>git push -u origin master</code></p> <h3 id="existing-git-repository"><a href="#existing-git-repository" class="header-anchor">#</a> Existing Git repository</h3> <p><code>cd existing_repo</code></p> <p><code>git remote add origin git@gitlab.ky-tech.com.cn:kuasheng-h5/fms-organization-cost.git</code></p> <p><code>git push -u origin --all</code></p> <p><code>git push -u origin --tags</code></p> <ul><li>如果这个本地仓库已经关联了一个远程分支为<code>origin</code>，想要再关联一个新的远程分支，这里就不能再叫 <code>origin</code>了</li> <li><img src="/Users/mpy/Library/Application Support/typora-user-images/image-20200525103231394.png" alt="image-20200525103231394" style="zoom:50%;"></li></ul> <p>拉取远程分支，并且在本地创建一个对应的分支</p> <p><code>git checkout -b AP-2020.06.18-mpy --track origin/AP-2020.06.18-mpy</code></p> <h4 id="记git报错-refusing-to-merge-unrelated-histories"><a href="#记git报错-refusing-to-merge-unrelated-histories" class="header-anchor">#</a> 记Git报错-refusing to merge unrelated histories</h4> <p>产生问题背景： 本地新建了一个文件夹，远程新建了一个仓库，现在需要把这两个仓库建立联系</p> <p>参考文章： https://blog.csdn.net/u012145252/article/details/80628451</p> <div class="language-js extra-class"><pre class="language-js"><code>git remote add origin https<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>github<span class="token punctuation">.</span>com<span class="token operator">/</span>Insistem<span class="token operator">/</span>learn<span class="token operator">-</span>day

git remote <span class="token operator">-</span>v <span class="token comment">// 查看远程仓库</span>

git pull origin master <span class="token operator">--</span>allow<span class="token operator">-</span>unrelated<span class="token operator">-</span>histories  <span class="token comment">// 发现可以在pull命令后紧接着使用--allow-unrelated-history选项来解决问题（该选项可以合并两个独立启动仓库的历史）</span>

git push <span class="token operator">--</span>set<span class="token operator">-</span>upstream origin master 等同于简写的 git push <span class="token operator">-</span>u origin master
</code></pre></div></div> <!----> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/insistem/blog/edit/master/docs/blog/项目架构/git使用.md" target="_blank" rel="noopener noreferrer">帮阿猪改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----> <div style="margin-top:30px;"><div class="el-row" style="margin-left:-10px;margin-right:-10px;"><div class="el-col el-col-24 el-col-sm-0 el-col-md-2 el-col-lg-4" style="padding-left:10px;padding-right:10px;display:block;"><div style="width:1px;height:1px;"></div></div> <div class="el-col el-col-24 el-col-sm-24 el-col-md-18 el-col-lg-16" style="padding-left:10px;padding-right:10px;"><div class="el-card box-card is-always-shadow"><div class="el-card__header"><div class="clearfix"><span>温馨提示喵</span></div></div><div class="el-card__body"> <div class="el-row" style="margin-left:-10px;margin-right:-10px;"><div class="el-col el-col-24 el-col-xs-24 el-col-sm-12" style="padding-left:10px;padding-right:10px;"><div class="el-image"><div class="image-slot"><img src="https://github-imglib-1255459943.cos.ap-chengdu.myqcloud.com/assets/img/loading.gif" style="width:100%;"></div><!----></div></div> <div class="el-col el-col-24 el-col-xs-24 el-col-sm-12" style="padding-left:10px;padding-right:10px;"><div class="copyright-text"><div>本书采用“保持署名—非商用”<a href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">创意共享4.0许可证</a>。只要保持原作者署名和非商用，您可以自由地阅读、分享、修改本书。</div> <div>作者：<a href="https://github.com/godbasin" target="_blank">被删</a></div></div></div></div></div></div></div></div></div></footer> <!---->  <div class="gitalk-container theme-default-content"><div id="gitalk-container" class="content"></div></div></main> <div id="kitty-container"><span><div role="tooltip" id="el-popover-7230" aria-hidden="true" class="el-popover el-popper" style="width:undefinedpx;display:none;"><!----><img src="https://github-imglib-1255459943.cos.ap-chengdu.myqcloud.com/2code2.jpg" class="image"> <div class="text">牡羊猪的猫粮罐</div> </div><div id="kitty" style="background:url(https://github-imglib-1255459943.cos.ap-chengdu.myqcloud.com/assets/img/kitty0.svg);"></div></span> <div class="el-dialog__wrapper" style="display:none;"><div role="dialog" aria-modal="true" aria-label="牡羊猪是这样渐渐胖成猪的喵（点击图片可以切换噢）" class="el-dialog" style="margin-top:15vh;"><div class="el-dialog__header"><span class="el-dialog__title">牡羊猪是这样渐渐胖成猪的喵（点击图片可以切换噢）</span><button type="button" aria-label="Close" class="el-dialog__headerbtn"><i class="el-dialog__close el-icon el-icon-close"></i></button></div><!----><!----></div></div></div></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.10236026.js" defer></script><script src="/blog/assets/js/2.d15e92b9.js" defer></script><script src="/blog/assets/js/90.8a4cb432.js" defer></script>
  </body>
</html>
