(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{520:function(e,t,r){"use strict";r.r(t);var a=r(58),i=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h3",{attrs:{id:"css计算、排版、渲染、合成-一"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#css计算、排版、渲染、合成-一"}},[e._v("#")]),e._v(" css计算、排版、渲染、合成（一）")]),e._v(" "),r("h4",{attrs:{id:"预习内容"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#预习内容"}},[e._v("#")]),e._v(" 预习内容")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://time.geekbang.org/column/article/80311",target:"_blank",rel:"noopener noreferrer"}},[e._v("浏览器：一个浏览器是如何工作的（阶段三）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://time.geekbang.org/column/article/81730",target:"_blank",rel:"noopener noreferrer"}},[e._v("浏览器：一个浏览器是如何工作的？（阶段四）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://time.geekbang.org/column/article/82397",target:"_blank",rel:"noopener noreferrer"}},[e._v("浏览器：一个浏览器是如何工作的？（阶段五）"),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"https://www.w3.org/TR/CSS2/cascade.html#specificity",target:"_blank",rel:"noopener noreferrer"}},[e._v("CSS标准"),r("OutboundLink")],1)])]),e._v(" "),r("h4",{attrs:{id:"内容-computing-css-把style中的属性加到元素上"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内容-computing-css-把style中的属性加到元素上"}},[e._v("#")]),e._v(" 内容： Computing CSS - 把style中的属性加到元素上")]),e._v(" "),r("p",[e._v("![image-20200602143219097](/Users/mpy/Library/Application Support/typora-user-images/image-20200602143219097.png)")]),e._v(" "),r("ol",[r("li",[e._v("收集 CSS 规则 - "),r("em",[e._v("style标签中的文本内容")]),e._v(" "),r("ol",[r("li",[e._v("遇到style标签，把css规则保存起来")]),e._v(" "),r("li",[e._v("利用 "),r("code",[e._v("css")]),e._v("第三方包，将内容转为 "),r("code",[e._v("AST Object")])]),e._v(" "),r("li",[e._v("真实的浏览器遇到link还需要请求网络上的css资源")])])]),e._v(" "),r("li",[e._v("添加调用\n"),r("ol",[r("li",[e._v("当我们创建一个元素后，立即计算 CSS")]),e._v(" "),r("li",[e._v("理论上，当我们分析一个元素时，所有css规则已经收集完毕")]),e._v(" "),r("li",[e._v("真实浏览器中，可能遇到写在body的style 标签，需要重新css计算的情况，这里我们忽略")])])]),e._v(" "),r("li",[e._v("获取父元素的序列（一定要先检查当前元素，再去找父元素）\n"),r("ol",[r("li",[e._v("在computeCSS函数中，我们必须知道元素的所有父元素才能判断元素与规则是否匹配")]),e._v(" "),r("li",[e._v("从上一步骤的stack，可以获取本元素所有的父元素")]),e._v(" "),r("li",[e._v("因为我们首先获取的是“当前元素”， 所以我们获得和计算父元素匹配的顺序是从内向外")])])]),e._v(" "),r("li",[e._v("拆分选择器\n"),r("ol",[r("li",[e._v("选择器也要从当前元素向外排列")]),e._v(" "),r("li",[e._v("复杂选择器拆成针对单个元素的选择器，用循环匹配父元素队列")])])]),e._v(" "),r("li",[e._v("计算选择器与元素匹配\n"),r("ol",[r("li",[e._v("根据选择器的类型和元素属性，计算是否与当前元素匹配")]),e._v(" "),r("li",[e._v("这里仅仅实现了三种基本选择器，实际的浏览器中要处理复合选择器")])])]),e._v(" "),r("li",[e._v("生成 computed 属性\n"),r("ol",[r("li",[e._v("一旦选择匹配，就应用选择器到元素上，形成computedStyle")])])]),e._v(" "),r("li",[e._v("确定规则覆盖关系（难点）\n"),r("ol",[r("li",[e._v("选择器的优先级- "),r("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity",target:"_blank",rel:"noopener noreferrer"}},[e._v("specificity"),r("OutboundLink")],1),e._v("（特异性）")]),e._v(" "),r("li",[r("code",[e._v("specificity")]),e._v("的计算规范 - 参考："),r("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity",target:"_blank",rel:"noopener noreferrer"}},[e._v("MDN"),r("OutboundLink")],1),e._v("中的"),r("code",[e._v("Specifications")]),e._v(",再查看level3，再查看"),r("code",[e._v("9.Calculating a selector's specificity")]),e._v(" 即可找到")])])])]),e._v(" "),r("h5",{attrs:{id:"作业"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#作业"}},[e._v("#")]),e._v(" 作业")]),e._v(" "),r("ul",[r("li",[e._v("（可选）： 实现复合选择器，实现支持空格的class选择器，完善match函数")]),e._v(" "),r("li",[e._v("（可选）："),r("code",[e._v("specificity")]),e._v("函数增加对 "),r("code",[e._v("div .mpy#id")]),e._v("写法的支持")])]),e._v(" "),r("h3",{attrs:{id:"css计算-排版-渲染-合成-二"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#css计算-排版-渲染-合成-二"}},[e._v("#")]),e._v(" CSS计算，排版，渲染，合成（二）")]),e._v(" "),r("h4",{attrs:{id:"内容-排版-layout"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#内容-排版-layout"}},[e._v("#")]),e._v(" 内容： 排版 - layout")]),e._v(" "),r("p",[e._v("![image-20200602194213169](/Users/mpy/Library/Application Support/typora-user-images/image-20200602194213169.png)")]),e._v(" "),r("p",[r("a",{attrs:{href:"https://www.yuque.com/wendraw/fe/css",target:"_blank",rel:"noopener noreferrer"}},[e._v("css概览"),r("OutboundLink")],1)]),e._v(" "),r("h5",{attrs:{id:"经历了三代"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#经历了三代"}},[e._v("#")]),e._v(" 经历了三代")]),e._v(" "),r("ul",[r("li",[e._v("标准流")]),e._v(" "),r("li",[e._v("float  - position")]),e._v(" "),r("li",[e._v("Flex")]),e._v(" "),r("li",[e._v("Grid")])]),e._v(" "),r("h5",{attrs:{id:"这里我们来实现比较简单的flex布局"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#这里我们来实现比较简单的flex布局"}},[e._v("#")]),e._v(" 这里我们来实现比较简单的flex布局")]),e._v(" "),r("ul",[r("li",[e._v("第一步：\n"),r("ul",[r("li",[e._v("设置属性")])])]),e._v(" "),r("li",[e._v("第二步：收集元素进行（hang）\n"),r("ul",[r("li",[e._v("分行\n"),r("ul",[r("li",[e._v("根据主轴尺寸（mainSize）,把元素分进行")]),e._v(" "),r("li",[e._v("若设置了 "),r("code",[e._v("no-wrap")]),e._v("， 则强行分配进第一行")])])])])])])])}),[],!1,null,null,null);t.default=i.exports}}]);